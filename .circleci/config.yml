version: 2.1

orbs:
  maven: circleci/maven@0.0.12

workflows:
  maven_test:
    jobs:
      - maven/test # checkout, build, test, and upload test results

jobs:
  build:
    docker:
      # specify the version you desire here
      - image: circleci/openjdk:8-jdk
    steps:
      - checkout
      - run: mvn cobertura:cobertura
      - store_test_results:
          path: target/surefire-reports
      - name: Send to CodeCov
        command: bash <(curl -s https://codecov.io/bash)